import{S as Re,i as Ae,s as Se,k as T,l as R,m as z,h as b,n as I,b as y,H as ne,J as je,w as Fe,q as C,a as V,r as H,c as q,K as Ue,G as j,L as he,M as L,N as te,O as re,u as J,e as X,P as ze,p as K}from"../chunks/index.8b214ad8.js";var G={};G.Mapping=class{constructor(l,t,e,n,s){this.pairs=this.pairs.bind(this),this.alignment=this.alignment.bind(this),this.a=l,this.b=t,this.distance=e,this.track=n,this.backtrackFn=s,this.pairCache=null}pairs(){return this.pairCache==null&&(this.pairCache=this.backtrackFn(this.a,this.b,this.track)),this.pairCache}alignment(){var l,t,e,n,s,r,c;for(r=this.pairs(),l=[],t=[],c=r.reverse(),e=0,n=c.length;e<n;e++)s=c[e],l.push(s[0]),t.push(s[1]);return{alignmentA:l,alignmentB:t}}};G.zero=function(i,l){var t,e,n,s,r,c,f,a;for(f=new Array(i),t=n=0,r=i;n<r;t=n+=1)for(a=f[t]=new Array(l),e=s=0,c=l;s<c;e=s+=1)a[e]=0;return f};G.trackedMin=function(i,l,t){var e;return e={value:i,index:0},l<e.value&&(e.value=l,e.index=1),t<e.value&&(e.value=t,e.index=2),e};var we,Ee,ye,Me,Ne,W;({Mapping:we,zero:W,trackedMin:Ne}=G);Ee=function(i,l,t){var e,n,s,r,c,f,a,v,_,k,g;for(k=[],g=[],k.push([void 0,i]);k.length>0;)for([r,a]=k.pop(),n=l(a),s=(v=n!=null?n[0]:void 0)!=null?v:null,g.push([r,a,s]),_=n??[],r=c=0,f=_.length;c<f;r=++c)e=_[r],k.push([r,e]);for(;g.length>0;)[r,a,s]=g.pop(),t(r,a,s)};ye=function(i,l,t,e,n,s){var r,c,f,a,v,_,k,g,m,p,d,o,E,u,N,O;for(g=function(D){var A;return A={nodes:[],llds:[],keyroots:[]},Ee(D,t,function(h,M,F){var w,P,S;S=A.nodes.length,A.nodes.push(M),F==null?P=S:(w=A.nodes.indexOf(F),P=A.llds[w]),A.llds.push(P),h!==0&&A.keyroots.push(S)}),A},N=function(D,A){var h,M,F,w,P,S,U,B,Q,Y,Z,$,x,ee,ie,oe,le,ae,ce,fe,ue;for(M=d.llds,P=o.llds,F=d.nodes,S=o.nodes,U=M[D]-1,B=P[A]-1,Z=D-M[D]+2,x=A-P[A]+2,h=Q=1,ae=Z;Q<ae;h=Q+=1)r[h][0]=r[h-1][0]+n(F[h+U]);for(w=Y=1,ce=x;Y<ce;w=Y+=1)r[0][w]=r[0][w-1]+e(S[w+B]);for(h=ee=1,fe=Z;ee<fe;h=ee+=1)for(w=le=1,ue=x;le<ue;w=le+=1)M[D]===M[h+U]&&P[A]===P[w+B]?($=Ne(r[h-1][w]+n(F[h+U]),r[h][w-1]+e(S[w+B]),r[h-1][w-1]+s(F[h+U],S[w+B])),O[h+U][w+B]=$.index,E[h+U][w+B]=r[h][w]=$.value):(ie=M[h+U]-1-U,oe=P[w+B]-1-B,r[h][w]=Math.min(r[h-1][w]+n(F[h+U]),r[h][w-1]+e(S[w+B]),r[ie][oe]+E[h+U][w+B]))},d=g(i),o=g(l),O=W(d.nodes.length,o.nodes.length),E=W(d.nodes.length,o.nodes.length),r=W(d.nodes.length+1,o.nodes.length+1),m=d.keyroots,a=0,_=m.length;a<_;a++)for(c=m[a],p=o.keyroots,v=0,k=p.length;v<k;v++)f=p[v],N(c,f);return u=E[d.nodes.length-1][o.nodes.length-1],new we(d,o,u,O,Me)};Me=function(i,l,t){var e,n,s;for(s=[],e=i.nodes.length-1,n=l.nodes.length-1;e>=0&&n>=0;)switch(t[e][n]){case 0:s.push([i.nodes[e],null]),--e;break;case 1:s.push([null,l.nodes[n]]),--n;break;case 2:s.push([i.nodes[e],l.nodes[n]]),--e,--n;break;default:throw new Error(`Invalid operation ${t[e][n]} at (${e}, ${n})`)}if(e===-1&&n!==-1)for(;n>=0;)s.push([null,l.nodes[n]]),--n;if(e!==-1&&n===-1)for(;e>=0;)s.push([i.nodes[e],null]),--e;return s};var De=ye,Ie,Oe,Pe,Te,se;({Mapping:Ie,zero:se,trackedMin:Te}=G);Oe=function(i,l,t,e,n){var s,r,c,f,a,v,_,k,g,m,p,d,o,E,u,N,O,D;for(s=i,c=l,D=se(s.length+1,c.length+1),a=se(s.length+1,c.length+1),_=g=1,E=s.length;g<=E;_=g+=1)a[_][0]=_;for(k=m=1,u=c.length;m<=u;k=m+=1)a[0][k]=k;for(_=p=1,N=s.length;p<=N;_=p+=1)for(k=o=1,O=c.length;o<=O;k=o+=1)r=s[_-1],f=c[k-1],d=Te(a[_-1][k]+e(r),a[_][k-1]+t(f),a[_-1][k-1]+n(r,f)),D[_][k]=d.index,a[_][k]=d.value;return v=a[s.length][c.length],new Ie(s,c,v,D,Pe)};Pe=function(i,l,t){var e,n,s;for(e=i.length,n=l.length,s=[];e>0&&n>0;)switch(t[e][n]){case 0:s.push([i[e-1],null]),--e;break;case 1:s.push([null,l[n-1]]),--n;break;case 2:s.push([i[e-1],l[n-1]]),--e,--n;break;default:throw new Error(`Invalid operation ${t[e][n]} at (${e}, ${n})`)}if(e===0&&n!==0)for(;n>0;)s.push([null,l[n-1]]),--n;if(e!==0&&n===0)for(;e>0;)s.push([i[e-1],null]),--e;return s};var Be=Oe,Ce={ted:De,levenshtein:Be};function _e(i,l,t){const e=i.slice();return e[21]=l[t],e}function pe(i,l,t){const e=i.slice();return e[24]=l[t],e}function de(i,l,t){const e=i.slice();return e[27]=l[t],e}function He(i){let l,t,e,n,s,r,c,f,a,v,_,k=i[0],g=[];for(let o=0;o<k.length;o+=1)g[o]=ke(de(i,k,o));let m=i[6].lines,p=[];for(let o=0;o<m.length;o+=1)p[o]=me(_e(i,m,o));let d=i[6].lines[i[2]-1].character==i[1]&&be(i);return{c(){l=T("input"),t=C(` Fast forward
		
		`),e=T("button"),n=C("Pick line"),s=V(),r=T("select");for(let o=0;o<g.length;o+=1)g[o].c();c=V(),f=T("div");for(let o=0;o<p.length;o+=1)p[o].c();a=V(),d&&d.c(),this.h()},l(o){l=R(o,"INPUT",{type:!0}),t=H(o,` Fast forward
		
		`),e=R(o,"BUTTON",{class:!0});var E=z(e);n=H(E,"Pick line"),E.forEach(b),s=q(o),r=R(o,"SELECT",{class:!0});var u=z(r);for(let O=0;O<g.length;O+=1)g[O].l(u);u.forEach(b),c=q(o),f=R(o,"DIV",{class:!0});var N=z(f);for(let O=0;O<p.length;O+=1)p[O].l(N);a=q(N),d&&d.l(N),N.forEach(b),this.h()},h(){I(l,"type","checkbox"),I(e,"class","svelte-1nful26"),I(r,"class","svelte-1nful26"),i[1]===void 0&&Ue(()=>i[15].call(r)),I(f,"class","lines svelte-1nful26")},m(o,E){y(o,l,E),l.checked=i[4],y(o,t,E),y(o,e,E),j(e,n),y(o,s,E),y(o,r,E);for(let u=0;u<g.length;u+=1)g[u].m(r,null);he(r,i[1]),y(o,c,E),y(o,f,E);for(let u=0;u<p.length;u+=1)p[u].m(f,null);j(f,a),d&&d.m(f,null),v||(_=[L(l,"change",i[13]),L(e,"click",i[14]),L(r,"change",i[15]),L(r,"change",i[12])],v=!0)},p(o,E){if(E&16&&(l.checked=o[4]),E&1){k=o[0];let u;for(u=0;u<k.length;u+=1){const N=de(o,k,u);g[u]?g[u].p(N,E):(g[u]=ke(N),g[u].c(),g[u].m(r,null))}for(;u<g.length;u+=1)g[u].d(1);g.length=k.length}if(E&3&&he(r,o[1]),E&2414){m=o[6].lines;let u;for(u=0;u<m.length;u+=1){const N=_e(o,m,u);p[u]?p[u].p(N,E):(p[u]=me(N),p[u].c(),p[u].m(f,a))}for(;u<p.length;u+=1)p[u].d(1);p.length=m.length}o[6].lines[o[2]-1].character==o[1]?d?d.p(o,E):(d=be(o),d.c(),d.m(f,null)):d&&(d.d(1),d=null)},d(o){o&&b(l),o&&b(t),o&&b(e),o&&b(s),o&&b(r),te(g,o),o&&b(c),o&&b(f),te(p,o),d&&d.d(),v=!1,re(_)}}}function Le(i){let l,t,e,n,s,r,c,f;return{c(){l=T("h1"),t=C("No script uploaded"),e=C(`
		Upload a script in .json format to get started.
		`),n=T("br"),s=V(),r=T("input"),this.h()},l(a){l=R(a,"H1",{class:!0});var v=z(l);t=H(v,"No script uploaded"),v.forEach(b),e=H(a,`
		Upload a script in .json format to get started.
		`),n=R(a,"BR",{}),s=q(a),r=R(a,"INPUT",{type:!0,accept:!0}),this.h()},h(){I(l,"class","svelte-1nful26"),I(r,"type","file"),I(r,"accept",".json")},m(a,v){y(a,l,v),j(l,t),y(a,e,v),y(a,n,v),y(a,s,v),y(a,r,v),c||(f=L(r,"change",i[9]),c=!0)},p:ne,d(a){a&&b(l),a&&b(e),a&&b(n),a&&b(s),a&&b(r),c=!1,f()}}}function ke(i){let l,t=i[27]+"",e,n;return{c(){l=T("option"),e=C(t),this.h()},l(s){l=R(s,"OPTION",{});var r=z(l);e=H(r,t),r.forEach(b),this.h()},h(){l.__value=n=i[27],l.value=l.__value},m(s,r){y(s,l,r),j(l,e)},p(s,r){r&1&&t!==(t=s[27]+"")&&J(e,t),r&1&&n!==(n=s[27])&&(l.__value=n,l.value=l.__value)},d(s){s&&b(l)}}}function ve(i){let l,t,e=i[21].character+"",n,s,r,c,f;function a(m,p){return p&352&&(r=null),r==null&&(r=!!(!m[5]&&m[8].has(m[21].line_no))),r?qe:Ve}let v=a(i,-1),_=v(i);function k(){return i[16](i[21])}function g(...m){return i[17](i[21],...m)}return{c(){l=T("div"),t=T("h4"),n=C(e),s=V(),_.c(),this.h()},l(m){l=R(m,"DIV",{class:!0});var p=z(l);t=R(p,"H4",{class:!0});var d=z(t);n=H(d,e),d.forEach(b),s=q(p),_.l(p),p.forEach(b),this.h()},h(){I(t,"class","svelte-1nful26"),I(l,"class","line svelte-1nful26")},m(m,p){y(m,l,p),j(l,t),j(t,n),j(l,s),_.m(l,null),c||(f=[L(l,"click",k),L(l,"keypress",g)],c=!0)},p(m,p){i=m,p&64&&e!==(e=i[21].character+"")&&J(n,e),v===(v=a(i,p))&&_?_.p(i,p):(_.d(1),_=v(i),_&&(_.c(),_.m(l,null)))},d(m){m&&b(l),_.d(),c=!1,re(f)}}}function Ve(i){let l=i[21].line+"",t;return{c(){t=C(l)},l(e){t=H(e,l)},m(e,n){y(e,t,n)},p(e,n){n&64&&l!==(l=e[21].line+"")&&J(t,l)},d(e){e&&b(t)}}}function qe(i){let l,t=i[8].get(i[21].line_no)||[{correct:"ERROR",color:"red"}],e=[];for(let n=0;n<t.length;n+=1)e[n]=ge(pe(i,t,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();l=X()},l(n){for(let s=0;s<e.length;s+=1)e[s].l(n);l=X()},m(n,s){for(let r=0;r<e.length;r+=1)e[r].m(n,s);y(n,l,s)},p(n,s){if(s&320){t=n[8].get(n[21].line_no)||[{correct:"ERROR",color:"red"}];let r;for(r=0;r<t.length;r+=1){const c=pe(n,t,r);e[r]?e[r].p(c,s):(e[r]=ge(c),e[r].c(),e[r].m(l.parentNode,l))}for(;r<e.length;r+=1)e[r].d(1);e.length=t.length}},d(n){te(e,n),n&&b(l)}}}function ge(i){let l,t=i[24].correct+"",e,n,s=i[24].incorrect+"",r;return{c(){l=T("span"),e=C(t),n=T("span"),r=C(s),this.h()},l(c){l=R(c,"SPAN",{style:!0,class:!0});var f=z(l);e=H(f,t),n=R(f,"SPAN",{style:!0,class:!0});var a=z(n);r=H(a,s),a.forEach(b),f.forEach(b),this.h()},h(){K(n,"text-decoration","line-through"),K(n,"font-size","8pt"),I(n,"class","svelte-1nful26"),K(l,"color",i[24].color),I(l,"class","svelte-1nful26")},m(c,f){y(c,l,f),j(l,e),j(l,n),j(n,r)},p(c,f){f&320&&t!==(t=c[24].correct+"")&&J(e,t),f&320&&s!==(s=c[24].incorrect+"")&&J(r,s),f&320&&K(l,"color",c[24].color)},d(c){c&&b(l)}}}function me(i){let l,t=(i[5]||i[21].line_no>=i[3]&&i[21].line_no<=i[2]&&!(i[21].line_no==i[2]&&i[21].character==i[1]))&&ve(i);return{c(){t&&t.c(),l=X()},l(e){t&&t.l(e),l=X()},m(e,n){t&&t.m(e,n),y(e,l,n)},p(e,n){e[5]||e[21].line_no>=e[3]&&e[21].line_no<=e[2]&&!(e[21].line_no==e[2]&&e[21].character==e[1])?t?t.p(e,n):(t=ve(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&b(l)}}}function be(i){let l,t,e,n,s,r,c;return{c(){l=T("div"),t=T("h4"),e=C(i[1]),n=V(),s=T("textarea"),this.h()},l(f){l=R(f,"DIV",{class:!0});var a=z(l);t=R(a,"H4",{class:!0});var v=z(t);e=H(v,i[1]),v.forEach(b),n=q(a),s=R(a,"TEXTAREA",{id:!0,class:!0}),z(s).forEach(b),a.forEach(b),this.h()},h(){I(t,"class","svelte-1nful26"),I(s,"id","user_input"),I(s,"class","svelte-1nful26"),I(l,"class","line svelte-1nful26")},m(f,a){y(f,l,a),j(l,t),j(t,e),j(l,n),j(l,s),i[18](s),r||(c=[L(s,"keypress",i[10]),ze(Ke.call(null,s))],r=!0)},p(f,a){a&2&&J(e,f[1])},d(f){f&&b(l),i[18](null),r=!1,re(c)}}}function Je(i){let l;function t(s,r){return s[6]==null?Le:He}let e=t(i),n=e(i);return{c(){l=T("div"),n.c(),this.h()},l(s){l=R(s,"DIV",{id:!0,class:!0});var r=z(l);n.l(r),r.forEach(b),this.h()},h(){I(l,"id","container"),I(l,"class","svelte-1nful26")},m(s,r){y(s,l,r),n.m(l,null)},p(s,[r]){e===(e=t(s))&&n?n.p(s,r):(n.d(1),n=e(s),n&&(n.c(),n.m(l,null)))},i:ne,o:ne,d(s){s&&b(l),n.d()}}}function Ge(i){let l="",t="",e="";const n=[];for(const s of i.pairs().reverse()){const[r,c]=s,f=r===c?"green":"red";f!=l&&(t!=""||e!="")&&(n.push({correct:t,incorrect:e,color:l}),t="",e=""),l=f,r!=null&&(t+=r),c!=null&&r!=c&&(e+=c)}return(t!=""||e!="")&&n.push({correct:t,incorrect:e,color:l}),n}function Ke(i){i.focus()}function We(i,l,t){let e=[],n="",s=1,r=1,c=!1,f=!1,a=null,v=null,_,k=new Map;const g=h=>{if(h.target.files.length==0)return;const M=h.target.files[0],F=new FileReader;F.readAsText(M),F.onload=w=>{var S;const P=(S=w.target)==null?void 0:S.result;t(6,a={lines:JSON.parse(P)}),t(0,e=[...new Set(a.lines.map(U=>U.character))]),t(1,n=e[0]),m()}};function m(){async function h(){if(a!=null)for(;a.lines[s-1].character!=n;)t(2,s+=1),c||await new Promise(M=>setTimeout(M,1e3))}v=v||h().then(()=>{v=null})}function p(h){if(h.key!="Enter"||a==null)return;const M=h.target.value,F=Ce.levenshtein(a.lines[s-1].line,M,P=>1,P=>1,(P,S)=>P==S?0:1),w=Ge(F);k.set(s,w),t(8,k),t(2,s+=1),t(7,_.value="",_),m()}function d(h,M){!f||M!=null&&M.key!="Enter"||(t(5,f=!1),t(3,r=h.line_no-5),t(2,s=h.line_no),t(8,k=new Map),m())}function o(h){t(8,k=new Map),m()}function E(){c=this.checked,t(4,c)}const u=()=>{t(5,f=!0)};function N(){n=je(this),t(1,n),t(0,e)}const O=h=>{d(h)},D=(h,M)=>{d(h,M)};function A(h){Fe[h?"unshift":"push"](()=>{_=h,t(7,_)})}return[e,n,s,r,c,f,a,_,k,g,p,d,o,E,u,N,O,D,A]}class Ye extends Re{constructor(l){super(),Ae(this,l,We,Je,Se,{})}}export{Ye as default};
