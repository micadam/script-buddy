import{S as Re,i as Ae,s as Le,k as P,l as T,m as F,h as m,n as A,b as y,H as ne,J as Se,w as Ue,q as C,a as D,r as H,c as J,K as je,G as S,L as he,M as q,N as te,O as se,u as G,e as X,P as Fe,p as V}from"../chunks/index.8b214ad8.js";var K={};K.Mapping=class{constructor(n,t,e,l,s){this.pairs=this.pairs.bind(this),this.alignment=this.alignment.bind(this),this.a=n,this.b=t,this.distance=e,this.track=l,this.backtrackFn=s,this.pairCache=null}pairs(){return this.pairCache==null&&(this.pairCache=this.backtrackFn(this.a,this.b,this.track)),this.pairCache}alignment(){var n,t,e,l,s,r,c;for(r=this.pairs(),n=[],t=[],c=r.reverse(),e=0,l=c.length;e<l;e++)s=c[e],n.push(s[0]),t.push(s[1]);return{alignmentA:n,alignmentB:t}}};K.zero=function(i,n){var t,e,l,s,r,c,u,a;for(u=new Array(i),t=l=0,r=i;l<r;t=l+=1)for(a=u[t]=new Array(n),e=s=0,c=n;s<c;e=s+=1)a[e]=0;return u};K.trackedMin=function(i,n,t){var e;return e={value:i,index:0},n<e.value&&(e.value=n,e.index=1),t<e.value&&(e.value=t,e.index=2),e};var we,Ee,ye,Me,Ne,W;({Mapping:we,zero:W,trackedMin:Ne}=K);Ee=function(i,n,t){var e,l,s,r,c,u,a,d,_,g,v;for(g=[],v=[],g.push([void 0,i]);g.length>0;)for([r,a]=g.pop(),l=n(a),s=(d=l!=null?l[0]:void 0)!=null?d:null,v.push([r,a,s]),_=l??[],r=c=0,u=_.length;c<u;r=++c)e=_[r],g.push([r,e]);for(;v.length>0;)[r,a,s]=v.pop(),t(r,a,s)};ye=function(i,n,t,e,l,s){var r,c,u,a,d,_,g,v,b,p,k,o,E,f,N,I;for(v=function(z){var R;return R={nodes:[],llds:[],keyroots:[]},Ee(z,t,function(h,M,U){var w,O,L;L=R.nodes.length,R.nodes.push(M),U==null?O=L:(w=R.nodes.indexOf(U),O=R.llds[w]),R.llds.push(O),h!==0&&R.keyroots.push(L)}),R},N=function(z,R){var h,M,U,w,O,L,j,B,Q,Y,Z,$,x,ee,ie,oe,le,ae,ce,ue,fe;for(M=k.llds,O=o.llds,U=k.nodes,L=o.nodes,j=M[z]-1,B=O[R]-1,Z=z-M[z]+2,x=R-O[R]+2,h=Q=1,ae=Z;Q<ae;h=Q+=1)r[h][0]=r[h-1][0]+l(U[h+j]);for(w=Y=1,ce=x;Y<ce;w=Y+=1)r[0][w]=r[0][w-1]+e(L[w+B]);for(h=ee=1,ue=Z;ee<ue;h=ee+=1)for(w=le=1,fe=x;le<fe;w=le+=1)M[z]===M[h+j]&&O[R]===O[w+B]?($=Ne(r[h-1][w]+l(U[h+j]),r[h][w-1]+e(L[w+B]),r[h-1][w-1]+s(U[h+j],L[w+B])),I[h+j][w+B]=$.index,E[h+j][w+B]=r[h][w]=$.value):(ie=M[h+j]-1-j,oe=O[w+B]-1-B,r[h][w]=Math.min(r[h-1][w]+l(U[h+j]),r[h][w-1]+e(L[w+B]),r[ie][oe]+E[h+j][w+B]))},k=v(i),o=v(n),I=W(k.nodes.length,o.nodes.length),E=W(k.nodes.length,o.nodes.length),r=W(k.nodes.length+1,o.nodes.length+1),b=k.keyroots,a=0,_=b.length;a<_;a++)for(c=b[a],p=o.keyroots,d=0,g=p.length;d<g;d++)u=p[d],N(c,u);return f=E[k.nodes.length-1][o.nodes.length-1],new we(k,o,f,I,Me)};Me=function(i,n,t){var e,l,s;for(s=[],e=i.nodes.length-1,l=n.nodes.length-1;e>=0&&l>=0;)switch(t[e][l]){case 0:s.push([i.nodes[e],null]),--e;break;case 1:s.push([null,n.nodes[l]]),--l;break;case 2:s.push([i.nodes[e],n.nodes[l]]),--e,--l;break;default:throw new Error(`Invalid operation ${t[e][l]} at (${e}, ${l})`)}if(e===-1&&l!==-1)for(;l>=0;)s.push([null,n.nodes[l]]),--l;if(e!==-1&&l===-1)for(;e>=0;)s.push([i.nodes[e],null]),--e;return s};var ze=ye,Ie,Oe,Pe,Te,re;({Mapping:Ie,zero:re,trackedMin:Te}=K);Oe=function(i,n,t,e,l){var s,r,c,u,a,d,_,g,v,b,p,k,o,E,f,N,I,z;for(s=i,c=n,z=re(s.length+1,c.length+1),a=re(s.length+1,c.length+1),_=v=1,E=s.length;v<=E;_=v+=1)a[_][0]=_;for(g=b=1,f=c.length;b<=f;g=b+=1)a[0][g]=g;for(_=p=1,N=s.length;p<=N;_=p+=1)for(g=o=1,I=c.length;o<=I;g=o+=1)r=s[_-1],u=c[g-1],k=Te(a[_-1][g]+e(r),a[_][g-1]+t(u),a[_-1][g-1]+l(r,u)),z[_][g]=k.index,a[_][g]=k.value;return d=a[s.length][c.length],new Ie(s,c,d,z,Pe)};Pe=function(i,n,t){var e,l,s;for(e=i.length,l=n.length,s=[];e>0&&l>0;)switch(t[e][l]){case 0:s.push([i[e-1],null]),--e;break;case 1:s.push([null,n[l-1]]),--l;break;case 2:s.push([i[e-1],n[l-1]]),--e,--l;break;default:throw new Error(`Invalid operation ${t[e][l]} at (${e}, ${l})`)}if(e===0&&l!==0)for(;l>0;)s.push([null,n[l-1]]),--l;if(e!==0&&l===0)for(;e>0;)s.push([i[e-1],null]),--e;return s};var Be=Oe,Ce={ted:ze,levenshtein:Be};function _e(i,n,t){const e=i.slice();return e[21]=n[t],e}function pe(i,n,t){const e=i.slice();return e[24]=n[t],e}function de(i,n,t){const e=i.slice();return e[27]=n[t],e}function He(i){let n,t,e,l,s,r,c,u,a,d,_,g=i[4],v=[];for(let o=0;o<g.length;o+=1)v[o]=ke(de(i,g,o));let b=i[0].lines,p=[];for(let o=0;o<b.length;o+=1)p[o]=me(_e(i,b,o));let k=i[0].lines[i[1]-1].character==i[3]&&be(i);return{c(){n=P("input"),t=C(` Fast forward
        
        `),e=P("button"),l=C("Pick line"),s=D(),r=P("select");for(let o=0;o<v.length;o+=1)v[o].c();c=D(),u=P("ul");for(let o=0;o<p.length;o+=1)p[o].c();a=D(),k&&k.c(),this.h()},l(o){n=T(o,"INPUT",{type:!0}),t=H(o,` Fast forward
        
        `),e=T(o,"BUTTON",{});var E=F(e);l=H(E,"Pick line"),E.forEach(m),s=J(o),r=T(o,"SELECT",{class:!0});var f=F(r);for(let I=0;I<v.length;I+=1)v[I].l(f);f.forEach(m),c=J(o),u=T(o,"UL",{class:!0});var N=F(u);for(let I=0;I<p.length;I+=1)p[I].l(N);a=J(N),k&&k.l(N),N.forEach(m),this.h()},h(){A(n,"type","checkbox"),A(r,"class","svelte-1wnu52b"),i[3]===void 0&&je(()=>i[15].call(r)),A(u,"class","svelte-1wnu52b")},m(o,E){y(o,n,E),n.checked=i[5],y(o,t,E),y(o,e,E),S(e,l),y(o,s,E),y(o,r,E);for(let f=0;f<v.length;f+=1)v[f].m(r,null);he(r,i[3]),y(o,c,E),y(o,u,E);for(let f=0;f<p.length;f+=1)p[f].m(u,null);S(u,a),k&&k.m(u,null),d||(_=[q(n,"change",i[13]),q(e,"click",i[14]),q(r,"change",i[15]),q(r,"change",i[12])],d=!0)},p(o,E){if(E&32&&(n.checked=o[5]),E&16){g=o[4];let f;for(f=0;f<g.length;f+=1){const N=de(o,g,f);v[f]?v[f].p(N,E):(v[f]=ke(N),v[f].c(),v[f].m(r,null))}for(;f<v.length;f+=1)v[f].d(1);v.length=g.length}if(E&24&&he(r,o[3]),E&2383){b=o[0].lines;let f;for(f=0;f<b.length;f+=1){const N=_e(o,b,f);p[f]?p[f].p(N,E):(p[f]=me(N),p[f].c(),p[f].m(u,a))}for(;f<p.length;f+=1)p[f].d(1);p.length=b.length}o[0].lines[o[1]-1].character==o[3]?k?k.p(o,E):(k=be(o),k.c(),k.m(u,null)):k&&(k.d(1),k=null)},d(o){o&&m(n),o&&m(t),o&&m(e),o&&m(s),o&&m(r),te(v,o),o&&m(c),o&&m(u),te(p,o),k&&k.d(),d=!1,se(_)}}}function qe(i){let n,t,e,l,s,r,c,u;return{c(){n=P("h1"),t=C("No script uploaded"),e=C(`
        Upload a script in .json format to get started.
        `),l=P("br"),s=D(),r=P("input"),this.h()},l(a){n=T(a,"H1",{});var d=F(n);t=H(d,"No script uploaded"),d.forEach(m),e=H(a,`
        Upload a script in .json format to get started.
        `),l=T(a,"BR",{}),s=J(a),r=T(a,"INPUT",{type:!0,accept:!0}),this.h()},h(){A(r,"type","file"),A(r,"accept",".json")},m(a,d){y(a,n,d),S(n,t),y(a,e,d),y(a,l,d),y(a,s,d),y(a,r,d),c||(u=q(r,"change",i[9]),c=!0)},p:ne,d(a){a&&m(n),a&&m(e),a&&m(l),a&&m(s),a&&m(r),c=!1,u()}}}function ke(i){let n,t=i[27]+"",e,l;return{c(){n=P("option"),e=C(t),this.h()},l(s){n=T(s,"OPTION",{});var r=F(n);e=H(r,t),r.forEach(m),this.h()},h(){n.__value=l=i[27],n.value=n.__value},m(s,r){y(s,n,r),S(n,e)},p(s,r){r&16&&t!==(t=s[27]+"")&&G(e,t),r&16&&l!==(l=s[27])&&(n.__value=l,n.value=n.__value)},d(s){s&&m(n)}}}function ge(i){let n,t,e=i[21].character+"",l,s,r,c,u;function a(b,p){return p&321&&(r=null),r==null&&(r=!!(!b[8]&&b[6].has(b[21].line_no))),r?Je:De}let d=a(i,-1),_=d(i);function g(){return i[16](i[21])}function v(...b){return i[17](i[21],...b)}return{c(){n=P("li"),t=P("h4"),l=C(e),s=D(),_.c(),this.h()},l(b){n=T(b,"LI",{class:!0});var p=F(n);t=T(p,"H4",{class:!0});var k=F(t);l=H(k,e),k.forEach(m),s=J(p),_.l(p),p.forEach(m),this.h()},h(){A(t,"class","svelte-1wnu52b"),A(n,"class","svelte-1wnu52b")},m(b,p){y(b,n,p),S(n,t),S(t,l),S(n,s),_.m(n,null),c||(u=[q(n,"click",g),q(n,"keypress",v)],c=!0)},p(b,p){i=b,p&1&&e!==(e=i[21].character+"")&&G(l,e),d===(d=a(i,p))&&_?_.p(i,p):(_.d(1),_=d(i),_&&(_.c(),_.m(n,null)))},d(b){b&&m(n),_.d(),c=!1,se(u)}}}function De(i){let n=i[21].line+"",t;return{c(){t=C(n)},l(e){t=H(e,n)},m(e,l){y(e,t,l)},p(e,l){l&1&&n!==(n=e[21].line+"")&&G(t,n)},d(e){e&&m(t)}}}function Je(i){let n,t=i[6].get(i[21].line_no)||[{correct:"ERROR",color:"red"}],e=[];for(let l=0;l<t.length;l+=1)e[l]=ve(pe(i,t,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=X()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);n=X()},m(l,s){for(let r=0;r<e.length;r+=1)e[r].m(l,s);y(l,n,s)},p(l,s){if(s&65){t=l[6].get(l[21].line_no)||[{correct:"ERROR",color:"red"}];let r;for(r=0;r<t.length;r+=1){const c=pe(l,t,r);e[r]?e[r].p(c,s):(e[r]=ve(c),e[r].c(),e[r].m(n.parentNode,n))}for(;r<e.length;r+=1)e[r].d(1);e.length=t.length}},d(l){te(e,l),l&&m(n)}}}function ve(i){let n,t=i[24].correct+"",e,l,s=i[24].incorrect+"",r;return{c(){n=P("span"),e=C(t),l=P("span"),r=C(s),this.h()},l(c){n=T(c,"SPAN",{style:!0,class:!0});var u=F(n);e=H(u,t),l=T(u,"SPAN",{style:!0,class:!0});var a=F(l);r=H(a,s),a.forEach(m),u.forEach(m),this.h()},h(){V(l,"text-decoration","line-through"),V(l,"font-size","8pt"),A(l,"class","svelte-1wnu52b"),V(n,"color",i[24].color),A(n,"class","svelte-1wnu52b")},m(c,u){y(c,n,u),S(n,e),S(n,l),S(l,r)},p(c,u){u&65&&t!==(t=c[24].correct+"")&&G(e,t),u&65&&s!==(s=c[24].incorrect+"")&&G(r,s),u&65&&V(n,"color",c[24].color)},d(c){c&&m(n)}}}function me(i){let n,t=(i[8]||i[21].line_no>=i[2]&&i[21].line_no<=i[1]&&!(i[21].line_no==i[1]&&i[21].character==i[3]))&&ge(i);return{c(){t&&t.c(),n=X()},l(e){t&&t.l(e),n=X()},m(e,l){t&&t.m(e,l),y(e,n,l)},p(e,l){e[8]||e[21].line_no>=e[2]&&e[21].line_no<=e[1]&&!(e[21].line_no==e[1]&&e[21].character==e[3])?t?t.p(e,l):(t=ge(e),t.c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&m(n)}}}function be(i){let n,t,e,l,s,r,c;return{c(){n=P("li"),t=P("h4"),e=C(i[3]),l=D(),s=P("textarea"),this.h()},l(u){n=T(u,"LI",{class:!0});var a=F(n);t=T(a,"H4",{class:!0});var d=F(t);e=H(d,i[3]),d.forEach(m),l=J(a),s=T(a,"TEXTAREA",{id:!0,class:!0}),F(s).forEach(m),a.forEach(m),this.h()},h(){A(t,"class","svelte-1wnu52b"),A(s,"id","user_input"),A(s,"class","svelte-1wnu52b"),A(n,"class","svelte-1wnu52b")},m(u,a){y(u,n,a),S(n,t),S(t,e),S(n,l),S(n,s),i[18](s),r||(c=[q(s,"keyup",i[10]),Fe(Ve.call(null,s))],r=!0)},p(u,a){a&8&&G(e,u[3])},d(u){u&&m(n),i[18](null),r=!1,se(c)}}}function Ge(i){let n;function t(s,r){return s[0]==null?qe:He}let e=t(i),l=e(i);return{c(){n=P("div"),l.c(),this.h()},l(s){n=T(s,"DIV",{id:!0,class:!0});var r=F(n);l.l(r),r.forEach(m),this.h()},h(){A(n,"id","script"),A(n,"class","svelte-1wnu52b")},m(s,r){y(s,n,r),l.m(n,null)},p(s,[r]){e===(e=t(s))&&l?l.p(s,r):(l.d(1),l=e(s),l&&(l.c(),l.m(n,null)))},i:ne,o:ne,d(s){s&&m(n),l.d()}}}function Ke(i){let n="",t="",e="";const l=[];for(const s of i.pairs().reverse()){const[r,c]=s,u=r===c?"green":"red";u!=n&&(t!=""||e!="")&&(l.push({correct:t,incorrect:e,color:n}),t="",e=""),n=u,r!=null&&(t+=r),c!=null&&r!=c&&(e+=c)}return(t!=""||e!="")&&l.push({correct:t,incorrect:e,color:n}),l}function Ve(i){i.focus()}function We(i,n,t){let e=null,l=1,s=1,r="",c=[],u=!1,a=new Map,d,_=!1,g=null;const v=h=>{if(h.target.files.length==0)return;const M=h.target.files[0],U=new FileReader;U.readAsText(M),U.onload=w=>{var L;const O=(L=w.target)==null?void 0:L.result;t(0,e={lines:JSON.parse(O)}),t(4,c=[...new Set(e.lines.map(j=>j.character))]),t(3,r=c[0]),b()}};function b(){async function h(){if(e!=null)for(;e.lines[l-1].character!=r;)t(1,l+=1),u||await new Promise(M=>setTimeout(M,1e3))}g=g||h().then(()=>{g=null})}function p(h){if(h.key!="Enter"||e==null)return;const M=h.target.value,U=Ce.levenshtein(e.lines[l-1].line,M,O=>1,O=>1,(O,L)=>O==L?0:1),w=Ke(U);a.set(l,w),t(6,a),t(1,l+=1),t(7,d.value="",d),b()}function k(h,M){!_||M!=null&&M.key!="Enter"||(t(8,_=!1),t(2,s=h.line_no-5),t(1,l=h.line_no),t(6,a=new Map))}function o(h){t(6,a=new Map),b()}function E(){u=this.checked,t(5,u)}const f=()=>{t(8,_=!0)};function N(){r=Se(this),t(3,r),t(4,c)}const I=h=>{k(h)},z=(h,M)=>{k(h,M)};function R(h){Ue[h?"unshift":"push"](()=>{d=h,t(7,d)})}return[e,l,s,r,c,u,a,d,_,v,p,k,o,E,f,N,I,z,R]}class Ye extends Re{constructor(n){super(),Ae(this,n,We,Ge,Le,{})}}export{Ye as default};
