import{S as Te,i as Ae,s as Re,k as N,l as O,m as D,h as g,n as E,b as A,H as te,J as Le,q as F,a as C,r as V,c as H,K as Ue,G as M,L as he,M as q,N as ne,O as se,u as J,e as X,P as we,p as K}from"../chunks/index.8b214ad8.js";var G={};G.Mapping=class{constructor(l,n,e,t,r){this.pairs=this.pairs.bind(this),this.alignment=this.alignment.bind(this),this.a=l,this.b=n,this.distance=e,this.track=t,this.backtrackFn=r,this.pairCache=null}pairs(){return this.pairCache==null&&(this.pairCache=this.backtrackFn(this.a,this.b,this.track)),this.pairCache}alignment(){var l,n,e,t,r,s,o;for(s=this.pairs(),l=[],n=[],o=s.reverse(),e=0,t=o.length;e<t;e++)r=o[e],l.push(r[0]),n.push(r[1]);return{alignmentA:l,alignmentB:n}}};G.zero=function(i,l){var n,e,t,r,s,o,u,f;for(u=new Array(i),n=t=0,s=i;t<s;n=t+=1)for(f=u[n]=new Array(l),e=r=0,o=l;r<o;e=r+=1)f[e]=0;return u};G.trackedMin=function(i,l,n){var e;return e={value:i,index:0},l<e.value&&(e.value=l,e.index=1),n<e.value&&(e.value=n,e.index=2),e};var ze,Ee,ye,je,Ie,W;({Mapping:ze,zero:W,trackedMin:Ie}=G);Ee=function(i,l,n){var e,t,r,s,o,u,f,p,_,c,k;for(c=[],k=[],c.push([void 0,i]);c.length>0;)for([s,f]=c.pop(),t=l(f),r=(p=t!=null?t[0]:void 0)!=null?p:null,k.push([s,f,r]),_=t??[],s=o=0,u=_.length;o<u;s=++o)e=_[s],c.push([s,e]);for(;k.length>0;)[s,f,r]=k.pop(),n(s,f,r)};ye=function(i,l,n,e,t,r){var s,o,u,f,p,_,c,k,w,z,y,m,L,j,I,h;for(k=function(b){var a;return a={nodes:[],llds:[],keyroots:[]},Ee(b,n,function(d,U,R){var v,P,S;S=a.nodes.length,a.nodes.push(U),R==null?P=S:(v=a.nodes.indexOf(R),P=a.llds[v]),a.llds.push(P),d!==0&&a.keyroots.push(S)}),a},I=function(b,a){var d,U,R,v,P,S,T,B,Q,Y,Z,$,x,ee,ie,ae,le,oe,ce,fe,ue;for(U=y.llds,P=m.llds,R=y.nodes,S=m.nodes,T=U[b]-1,B=P[a]-1,Z=b-U[b]+2,x=a-P[a]+2,d=Q=1,oe=Z;Q<oe;d=Q+=1)s[d][0]=s[d-1][0]+t(R[d+T]);for(v=Y=1,ce=x;Y<ce;v=Y+=1)s[0][v]=s[0][v-1]+e(S[v+B]);for(d=ee=1,fe=Z;ee<fe;d=ee+=1)for(v=le=1,ue=x;le<ue;v=le+=1)U[b]===U[d+T]&&P[a]===P[v+B]?($=Ie(s[d-1][v]+t(R[d+T]),s[d][v-1]+e(S[v+B]),s[d-1][v-1]+r(R[d+T],S[v+B])),h[d+T][v+B]=$.index,L[d+T][v+B]=s[d][v]=$.value):(ie=U[d+T]-1-T,ae=P[v+B]-1-B,s[d][v]=Math.min(s[d-1][v]+t(R[d+T]),s[d][v-1]+e(S[v+B]),s[ie][ae]+L[d+T][v+B]))},y=k(i),m=k(l),h=W(y.nodes.length,m.nodes.length),L=W(y.nodes.length,m.nodes.length),s=W(y.nodes.length+1,m.nodes.length+1),w=y.keyroots,f=0,_=w.length;f<_;f++)for(o=w[f],z=m.keyroots,p=0,c=z.length;p<c;p++)u=z[p],I(o,u);return j=L[y.nodes.length-1][m.nodes.length-1],new ze(y,m,j,h,je)};je=function(i,l,n){var e,t,r;for(r=[],e=i.nodes.length-1,t=l.nodes.length-1;e>=0&&t>=0;)switch(n[e][t]){case 0:r.push([i.nodes[e],null]),--e;break;case 1:r.push([null,l.nodes[t]]),--t;break;case 2:r.push([i.nodes[e],l.nodes[t]]),--e,--t;break;default:throw new Error(`Invalid operation ${n[e][t]} at (${e}, ${t})`)}if(e===-1&&t!==-1)for(;t>=0;)r.push([null,l.nodes[t]]),--t;if(e!==-1&&t===-1)for(;e>=0;)r.push([i.nodes[e],null]),--e;return r};var De=ye,Me,Ne,Oe,Pe,re;({Mapping:Me,zero:re,trackedMin:Pe}=G);Ne=function(i,l,n,e,t){var r,s,o,u,f,p,_,c,k,w,z,y,m,L,j,I,h,b;for(r=i,o=l,b=re(r.length+1,o.length+1),f=re(r.length+1,o.length+1),_=k=1,L=r.length;k<=L;_=k+=1)f[_][0]=_;for(c=w=1,j=o.length;w<=j;c=w+=1)f[0][c]=c;for(_=z=1,I=r.length;z<=I;_=z+=1)for(c=m=1,h=o.length;m<=h;c=m+=1)s=r[_-1],u=o[c-1],y=Pe(f[_-1][c]+e(s),f[_][c-1]+n(u),f[_-1][c-1]+t(s,u)),b[_][c]=y.index,f[_][c]=y.value;return p=f[r.length][o.length],new Me(r,o,p,b,Oe)};Oe=function(i,l,n){var e,t,r;for(e=i.length,t=l.length,r=[];e>0&&t>0;)switch(n[e][t]){case 0:r.push([i[e-1],null]),--e;break;case 1:r.push([null,l[t-1]]),--t;break;case 2:r.push([i[e-1],l[t-1]]),--e,--t;break;default:throw new Error(`Invalid operation ${n[e][t]} at (${e}, ${t})`)}if(e===0&&t!==0)for(;t>0;)r.push([null,l[t-1]]),--t;if(e!==0&&t===0)for(;e>0;)r.push([i[e-1],null]),--e;return r};var Se=Ne,Be={ted:De,levenshtein:Se};function _e(i,l,n){const e=i.slice();return e[20]=l[n],e}function de(i,l,n){const e=i.slice();return e[23]=l[n],e}function pe(i,l,n){const e=i.slice();return e[26]=l[n],e}function Fe(i){let l,n,e,t,r,s,o,u,f,p,_,c,k,w,z,y=i[0],m=[];for(let h=0;h<y.length;h+=1)m[h]=ve(pe(i,y,h));let L=i[6].lines,j=[];for(let h=0;h<L.length;h+=1)j[h]=me(_e(i,L,h));let I=i[6].lines[i[2]-1].character==i[1]&&be(i);return{c(){l=N("div"),n=N("label"),e=F("Fast forward"),t=C(),r=N("input"),s=C(),o=N("button"),u=F("Pick line"),f=C(),p=N("select");for(let h=0;h<m.length;h+=1)m[h].c();_=C(),c=N("div");for(let h=0;h<j.length;h+=1)j[h].c();k=C(),I&&I.c(),this.h()},l(h){l=O(h,"DIV",{id:!0});var b=D(l);n=O(b,"LABEL",{for:!0,class:!0});var a=D(n);e=V(a,"Fast forward"),a.forEach(g),t=H(b),r=O(b,"INPUT",{type:!0,id:!0}),s=H(b),o=O(b,"BUTTON",{class:!0});var d=D(o);u=V(d,"Pick line"),d.forEach(g),f=H(b),p=O(b,"SELECT",{class:!0});var U=D(p);for(let v=0;v<m.length;v+=1)m[v].l(U);U.forEach(g),b.forEach(g),_=H(h),c=O(h,"DIV",{class:!0});var R=D(c);for(let v=0;v<j.length;v+=1)j[v].l(R);k=H(R),I&&I.l(R),R.forEach(g),this.h()},h(){E(n,"for","fast-forward"),E(n,"class","fast-forward"),E(r,"type","checkbox"),E(r,"id","fast-forward"),E(o,"class","svelte-njz2z6"),E(p,"class","svelte-njz2z6"),i[1]===void 0&&Ue(()=>i[15].call(p)),E(l,"id","controls"),E(c,"class","lines svelte-njz2z6")},m(h,b){A(h,l,b),M(l,n),M(n,e),M(l,t),M(l,r),r.checked=i[4],M(l,s),M(l,o),M(o,u),M(l,f),M(l,p);for(let a=0;a<m.length;a+=1)m[a].m(p,null);he(p,i[1]),A(h,_,b),A(h,c,b);for(let a=0;a<j.length;a+=1)j[a].m(c,null);M(c,k),I&&I.m(c,null),w||(z=[q(r,"change",i[13]),q(o,"click",i[14]),q(p,"change",i[15]),q(p,"change",i[11])],w=!0)},p(h,b){if(b&16&&(r.checked=h[4]),b&1){y=h[0];let a;for(a=0;a<y.length;a+=1){const d=pe(h,y,a);m[a]?m[a].p(d,b):(m[a]=ve(d),m[a].c(),m[a].m(p,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=y.length}if(b&3&&he(p,h[1]),b&1262){L=h[6].lines;let a;for(a=0;a<L.length;a+=1){const d=_e(h,L,a);j[a]?j[a].p(d,b):(j[a]=me(d),j[a].c(),j[a].m(c,k))}for(;a<j.length;a+=1)j[a].d(1);j.length=L.length}h[6].lines[h[2]-1].character==h[1]?I?I.p(h,b):(I=be(h),I.c(),I.m(c,null)):I&&(I.d(1),I=null)},d(h){h&&g(l),ne(m,h),h&&g(_),h&&g(c),ne(j,h),I&&I.d(),w=!1,se(z)}}}function Ve(i){let l,n,e,t,r,s,o,u,f,p,_;return{c(){l=N("h1"),n=F("No script uploaded"),e=F(`
		Upload a script in .json format to get started.
		`),t=N("br"),r=C(),s=N("label"),o=F("Upload script"),u=C(),f=N("input"),this.h()},l(c){l=O(c,"H1",{class:!0});var k=D(l);n=V(k,"No script uploaded"),k.forEach(g),e=V(c,`
		Upload a script in .json format to get started.
		`),t=O(c,"BR",{}),r=H(c),s=O(c,"LABEL",{for:!0,class:!0});var w=D(s);o=V(w,"Upload script"),w.forEach(g),u=H(c),f=O(c,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),this.h()},h(){E(l,"class","svelte-njz2z6"),E(s,"for","file-upload"),E(s,"class","upload svelte-njz2z6"),E(f,"type","file"),E(f,"id","file-upload"),E(f,"accept",".json"),E(f,"class","svelte-njz2z6")},m(c,k){A(c,l,k),M(l,n),A(c,e,k),A(c,t,k),A(c,r,k),A(c,s,k),M(s,o),A(c,u,k),A(c,f,k),p||(_=q(f,"change",i[8]),p=!0)},p:te,d(c){c&&g(l),c&&g(e),c&&g(t),c&&g(r),c&&g(s),c&&g(u),c&&g(f),p=!1,_()}}}function ve(i){let l,n=i[26]+"",e,t;return{c(){l=N("option"),e=F(n),this.h()},l(r){l=O(r,"OPTION",{});var s=D(l);e=V(s,n),s.forEach(g),this.h()},h(){l.__value=t=i[26],l.value=l.__value},m(r,s){A(r,l,s),M(l,e)},p(r,s){s&1&&n!==(n=r[26]+"")&&J(e,n),s&1&&t!==(t=r[26])&&(l.__value=t,l.value=l.__value)},d(r){r&&g(l)}}}function ke(i){let l,n,e=i[20].character+"",t,r,s,o,u;function f(w,z){return z&224&&(s=null),s==null&&(s=!!(!w[5]&&w[7].has(w[20].line_no))),s?He:Ce}let p=f(i,-1),_=p(i);function c(){return i[16](i[20])}function k(...w){return i[17](i[20],...w)}return{c(){l=N("div"),n=N("h4"),t=F(e),r=C(),_.c(),this.h()},l(w){l=O(w,"DIV",{class:!0});var z=D(l);n=O(z,"H4",{class:!0});var y=D(n);t=V(y,e),y.forEach(g),r=H(z),_.l(z),z.forEach(g),this.h()},h(){E(n,"class","svelte-njz2z6"),E(l,"class","line svelte-njz2z6")},m(w,z){A(w,l,z),M(l,n),M(n,t),M(l,r),_.m(l,null),o||(u=[we(i[12].call(null,l)),q(l,"click",c),q(l,"keypress",k)],o=!0)},p(w,z){i=w,z&64&&e!==(e=i[20].character+"")&&J(t,e),p===(p=f(i,z))&&_?_.p(i,z):(_.d(1),_=p(i),_&&(_.c(),_.m(l,null)))},d(w){w&&g(l),_.d(),o=!1,se(u)}}}function Ce(i){let l=i[20].line+"",n;return{c(){n=F(l)},l(e){n=V(e,l)},m(e,t){A(e,n,t)},p(e,t){t&64&&l!==(l=e[20].line+"")&&J(n,l)},d(e){e&&g(n)}}}function He(i){let l,n=i[7].get(i[20].line_no)||[{correct:"ERROR",color:"red"}],e=[];for(let t=0;t<n.length;t+=1)e[t]=ge(de(i,n,t));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();l=X()},l(t){for(let r=0;r<e.length;r+=1)e[r].l(t);l=X()},m(t,r){for(let s=0;s<e.length;s+=1)e[s].m(t,r);A(t,l,r)},p(t,r){if(r&192){n=t[7].get(t[20].line_no)||[{correct:"ERROR",color:"red"}];let s;for(s=0;s<n.length;s+=1){const o=de(t,n,s);e[s]?e[s].p(o,r):(e[s]=ge(o),e[s].c(),e[s].m(l.parentNode,l))}for(;s<e.length;s+=1)e[s].d(1);e.length=n.length}},d(t){ne(e,t),t&&g(l)}}}function ge(i){let l,n=i[23].correct+"",e,t,r=i[23].incorrect+"",s;return{c(){l=N("span"),e=F(n),t=N("span"),s=F(r),this.h()},l(o){l=O(o,"SPAN",{style:!0,class:!0});var u=D(l);e=V(u,n),t=O(u,"SPAN",{style:!0,class:!0});var f=D(t);s=V(f,r),f.forEach(g),u.forEach(g),this.h()},h(){K(t,"text-decoration","line-through"),K(t,"font-size","8pt"),E(t,"class","svelte-njz2z6"),K(l,"color",i[23].color),E(l,"class","svelte-njz2z6")},m(o,u){A(o,l,u),M(l,e),M(l,t),M(t,s)},p(o,u){u&192&&n!==(n=o[23].correct+"")&&J(e,n),u&192&&r!==(r=o[23].incorrect+"")&&J(s,r),u&192&&K(l,"color",o[23].color)},d(o){o&&g(l)}}}function me(i){let l,n=(i[5]||i[20].line_no>=i[3]&&i[20].line_no<=i[2]&&!(i[20].line_no==i[2]&&i[20].character==i[1]))&&ke(i);return{c(){n&&n.c(),l=X()},l(e){n&&n.l(e),l=X()},m(e,t){n&&n.m(e,t),A(e,l,t)},p(e,t){e[5]||e[20].line_no>=e[3]&&e[20].line_no<=e[2]&&!(e[20].line_no==e[2]&&e[20].character==e[1])?n?n.p(e,t):(n=ke(e),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&g(l)}}}function be(i){let l,n,e,t,r,s,o;return{c(){l=N("div"),n=N("h4"),e=F(i[1]),t=C(),r=N("textarea"),this.h()},l(u){l=O(u,"DIV",{class:!0});var f=D(l);n=O(f,"H4",{class:!0});var p=D(n);e=V(p,i[1]),p.forEach(g),t=H(f),r=O(f,"TEXTAREA",{id:!0,enterkeyhint:!0,class:!0}),D(r).forEach(g),f.forEach(g),this.h()},h(){E(n,"class","svelte-njz2z6"),E(r,"id","user_input"),E(r,"enterkeyhint","done"),E(r,"class","svelte-njz2z6"),E(l,"class","line svelte-njz2z6")},m(u,f){A(u,l,f),M(l,n),M(n,e),M(l,t),M(l,r),s||(o=[q(r,"keydown",i[9]),we(i[12].call(null,r))],s=!0)},p(u,f){f&2&&J(e,u[1])},d(u){u&&g(l),s=!1,se(o)}}}function qe(i){let l;function n(r,s){return r[6]==null?Ve:Fe}let e=n(i),t=e(i);return{c(){l=N("div"),t.c(),this.h()},l(r){l=O(r,"DIV",{id:!0,class:!0});var s=D(l);t.l(s),s.forEach(g),this.h()},h(){E(l,"id","container"),E(l,"class","svelte-njz2z6")},m(r,s){A(r,l,s),t.m(l,null)},p(r,[s]){e===(e=n(r))&&t?t.p(r,s):(t.d(1),t=e(r),t&&(t.c(),t.m(l,null)))},i:te,o:te,d(r){r&&g(l),t.d()}}}function Je(i){let l="",n="",e="";const t=[];for(const r of i.pairs().reverse()){const[s,o]=r,u=s===o?"green":"red";u!=l&&(n!=""||e!="")&&(t.push({correct:n,incorrect:e,color:l}),n="",e=""),l=u,s!=null&&(n+=s),o!=null&&s!=o&&(e+=o)}return(n!=""||e!="")&&t.push({correct:n,incorrect:e,color:l}),t}function Ge(i,l,n){let e=[],t="",r=1,s=1,o=!1,u=!1,f=null,p=null,_=new Map;const c=a=>{if(a.target.files.length==0)return;const d=a.target.files[0],U=new FileReader;U.readAsText(d),U.onload=R=>{var S;const v=(S=R.target)==null?void 0:S.result,P=JSON.parse(v);for(let T=0;T<P.length;T++)P[T].line_no=T+1;n(6,f={lines:P}),n(0,e=[...new Set(f.lines.map(T=>T.character))]),n(1,t=e[0]),k()}};function k(){async function a(){if(f!=null)for(;f.lines[r-1].character!=t;)n(2,r+=1),o||await new Promise(d=>setTimeout(d,1e3))}p=p||a().then(()=>{p=null})}function w(a){if(a.key!="Enter"||f==null)return;a.preventDefault();const d=a.target.value,U=Be.levenshtein(f.lines[r-1].line,d,P=>1,P=>1,(P,S)=>P==S?0:1),R=Je(U);_.set(r,R),n(7,_),n(2,r+=1);const v=a.target;v.value="",k()}function z(a,d){!u||d!=null&&d.key!="Enter"||(n(5,u=!1),n(3,s=a.line_no-5),n(2,r=a.line_no),n(7,_=new Map),k())}function y(a){n(7,_=new Map),k()}function m(a){u||(a.focus(),a.scrollIntoView(!1))}function L(){o=this.checked,n(4,o)}const j=()=>{n(5,u=!0)};function I(){t=Le(this),n(1,t),n(0,e)}return[e,t,r,s,o,u,f,_,c,w,z,y,m,L,j,I,a=>{z(a)},(a,d)=>{z(a,d)}]}class Xe extends Te{constructor(l){super(),Ae(this,l,Ge,qe,Re,{})}}export{Xe as default};
